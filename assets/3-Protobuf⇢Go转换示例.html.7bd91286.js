import{_ as s,o as a,c as o,e as n}from"./app.ad4da1a1.js";const p={},t=n(`<h3 id="_1-1\u521B\u5EFAproto\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_1-1\u521B\u5EFAproto\u6587\u4EF6" aria-hidden="true">#</a> 1.1\u521B\u5EFAproto\u6587\u4EF6</h3><p>\u521B\u5EFA\u4E00\u4E2Aproduct.proto\u6587\u4EF6,\u628A\u4EE5\u4E0B\u5FC5\u8981\u5934\u52A0\u4E0A</p><div class="language-protobuf ext-protobuf"><pre class="language-protobuf"><code><span class="token comment">//\u6307\u5B9A\u5F53\u5730\u524Dproto\u8BED\u6CD5\u7248\u672C,\u67092\u548C3</span>
<span class="token keyword">syntax</span> <span class="token operator">=</span> <span class="token string">&quot;proto3&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//option go_package=&quot;path;name&quot; path \u8868\u793A\u751F\u4EA7\u7684go\u6587\u4EF6\u5B58\u653E\u7684\u5730\u5740,\u4F1A\u81EA\u52A8\u751F\u6210\u76EE\u5F55</span>
<span class="token keyword">option</span> go_package<span class="token operator">=</span><span class="token string">&quot;../service&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//\u5305\u540D</span>
<span class="token keyword">package</span> <span class="token keyword">service</span><span class="token punctuation">;</span>

<span class="token keyword">message</span> <span class="token class-name">User</span><span class="token punctuation">{</span>
  <span class="token builtin">string</span> username<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token builtin">int32</span> age <span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">repeated</span> <span class="token builtin">string</span> password<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token keyword">repeated</span> <span class="token builtin">string</span> addresses <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//\u5B9A\u4E49\u670D\u52A1\u4E3B\u4F53</span>
<span class="token keyword">service</span> <span class="token class-name">ProdService</span><span class="token punctuation">{</span>
  <span class="token comment">//\u5B9A\u4E49\u65B9\u6CD5</span>
  <span class="token keyword">rpc</span> <span class="token function">GetProductStock</span><span class="token punctuation">(</span><span class="token class-name">ProductRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">ProductResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-2-\u6D4B\u8BD5proto\u751F\u6210go\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#_1-2-\u6D4B\u8BD5proto\u751F\u6210go\u4EE3\u7801" aria-hidden="true">#</a> 1.2 \u6D4B\u8BD5proto\u751F\u6210go\u4EE3\u7801</h3><h4 id="_1-2-1\u5B98\u65B9\u63D2\u4EF6-protoc-gen-go\u4E0D\u652F\u6301service\u7684\u751F\u6210-\u9700\u8981\u5B89\u88C5protoc-gen-go-grpc" tabindex="-1"><a class="header-anchor" href="#_1-2-1\u5B98\u65B9\u63D2\u4EF6-protoc-gen-go\u4E0D\u652F\u6301service\u7684\u751F\u6210-\u9700\u8981\u5B89\u88C5protoc-gen-go-grpc" aria-hidden="true">#</a> 1.2.1\u5B98\u65B9\u63D2\u4EF6 protoc-gen-go\u4E0D\u652F\u6301service\u7684\u751F\u6210 \u9700\u8981\u5B89\u88C5protoc-gen-go-grpc</h4><div class="language-text ext-text"><pre class="language-text"><code>$ go install google.golang.org/protobuf/cmd/protoc-gen-go@v1.28
$ go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@v1.2
</code></pre></div><p>\u751F\u6210\u547D\u4EE4</p><p>\u751F\u6210\u5230go\u6587\u4EF6\u7684\u5728proto\u6587\u4EF6\u4E0B</p><p><code>--go_opt=paths=source_relative</code> \u548C<code>--go-grpc_opt=paths=source_relative</code></p><div class="language-text ext-text"><pre class="language-text"><code>protoc --go_out=. --go_opt=paths=source_relative  --go-grpc_out=. --go-grpc_opt=paths=source_relative pbfiles/product.proto
</code></pre></div><p>\u751F\u6210\u5230\u6307\u5B9A\u76EE\u5F55</p><div class="language-bash ext-sh"><pre class="language-bash"><code>protoc --go_out<span class="token operator">=</span>. --go-grpc_out<span class="token operator">=</span>. pbfiles/product.proto
</code></pre></div><p>\u6CE8\uFF1A</p><ol><li><code>--go_out </code>\u548C<code>--go-grpc_out</code>\u540E\u9762\u8DDF<code>.</code>\u5C31\u884C</li><li>proto \u6587\u4EF6\u4E2Dgo_package=&quot;path;name&quot; path \u8868\u793A\u751F\u4EA7\u7684go\u6587\u4EF6\u5B58\u653E\u7684\u5730\u5740,\u4F1A\u81EA\u52A8\u751F\u6210\u76EE\u5F55</li></ol><h4 id="_1-2-2-github\u7248\u672C\u7684\u63D2\u4EF6protoc-gen-go\u662F\u4EE5\u4E0B\u7684\u6210\u529F\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_1-2-2-github\u7248\u672C\u7684\u63D2\u4EF6protoc-gen-go\u662F\u4EE5\u4E0B\u7684\u6210\u529F\u547D\u4EE4" aria-hidden="true">#</a> 1.2.2 github\u7248\u672C\u7684\u63D2\u4EF6protoc-gen-go\u662F\u4EE5\u4E0B\u7684\u6210\u529F\u547D\u4EE4</h4><div class="language-bash ext-sh"><pre class="language-bash"><code>protoc   --go_out<span class="token operator">=</span>./  ./test.proto
</code></pre></div><blockquote><p><strong>--go_out \u8DEF\u5F84\u548Cproto\u6587\u4EF6\u4E2D\u6307\u5B9A\u7684go_package\u7684\u8DEF\u5F84\u5173\u7CFB\uFF1F</strong></p><ol><li><p>--go_out\u6307\u5B9A\u7684\u662F\u5916\u5C42\u8DEF\u5F84\u5FC5\u987B\u5B58\u5728\u7684</p></li><li><p>go_package\u7684\u8DEF\u5F84\u662F\u5728--go_out\u7684\u5B50\u8DEF\u5F84</p></li></ol></blockquote><p>proto\u542B\u6709service\u751F\u6210go\u4EE3\u7801</p><div class="language-protobuf ext-protobuf"><pre class="language-protobuf"><code>protoc <span class="token operator">--</span>go_out<span class="token operator">=</span>plugins<span class="token operator">=</span>grpc<span class="token punctuation">:</span><span class="token punctuation">.</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token operator">/</span>product<span class="token punctuation">.</span>proto 
</code></pre></div><p>\u751F\u6210\u6DFB\u52A0grpc\u73AF\u5883<code>plugins=grpc:</code></p>`,20),e=[t];function c(r,l){return a(),o("div",null,e)}var g=s(p,[["render",c],["__file","3-Protobuf\u21E2Go\u8F6C\u6362\u793A\u4F8B.html.vue"]]);export{g as default};
